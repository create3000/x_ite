/* X_ITE v8.5.3 */(()=>{"use strict";var t={n:e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return t.d(i,{a:i}),i},d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components");var i=t.n(e);const n=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Fields");var o=t.n(n);const s=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Base/X3DFieldDefinition");var r=t.n(s);const a=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Base/FieldDefinitionArray");var l=t.n(a);const h=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Rendering/X3DCoordinateNode");var c=t.n(h);const d=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Base/X3DConstants");var u=t.n(d);const p=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Namespace");var g=t.n(p);function _(t,e){switch(arguments.length){case 0:this.semiMajorAxis=0,this.semiMinorAxis=0;break;case 2:this.semiMajorAxis=t,this.semiMinorAxis=e;break;case 3:const i=arguments[1];this.semiMajorAxis=t,this.semiMinorAxis=t*(1-1/i)}}_.prototype={constructor:_,getSemiMajorAxis:function(){return this.semiMajorAxis},getSemiMinorAxis:function(){return this.semiMinorAxis},toString:function(){return this.semiMajorAxis+" "+this.semiMinorAxis}};const w=_;g().set("standard/Math/Geometry/Spheroid3",w);const m=w,f={AA:new m(6377563.396,299.3249646,!0),AM:new m(6377340.189,299.3249646,!0),AN:new m(6378160,298.25,!0),BN:new m(6377483.865,299.1528128,!0),BR:new m(6377397.155,299.1528128,!0),CC:new m(6378206.4,294.9786982,!0),CD:new m(6378249.145,293.465,!0),EA:new m(6377276.345,300.8017,!0),EB:new m(6377298.556,300.8017,!0),EC:new m(6377301.243,300.8017,!0),ED:new m(6377295.664,300.8017,!0),EE:new m(6377304.063,300.8017,!0),EF:new m(6377309.613,300.8017,!0),FA:new m(6378155,298.3,!0),HE:new m(6378200,298.3,!0),HO:new m(6378270,297,!0),ID:new m(6378160,298.247,!0),IN:new m(6378388,297,!0),KA:new m(6378245,298.3,!0),RF:new m(6378137,298.257222101,!0),SA:new m(6378160,298.25,!0),WD:new m(6378135,298.26,!0),WE:new m(6378137,298.257223563,!0),SUN:new m(696342e3,1/9e-6,!0),MERCURY:new m(2439700,2439700),VENUS:new m(6051800,6051800),MOON:new m(1738140,1735970),MARS:new m(3395428,3377678),JUPITER:new m(71492e3,66854e3),SATURN:new m(60268e3,54364e3),URANUS:new m(2555e3,24973e3),NEPTUNE:new m(24764e3,24341e3),PLUTO:new m(1153e3,1153e3)};g().set("standard/Geospatial/ReferenceEllipsoids",f);const y=f,O=window[Symbol.for("X_ITE.X3D-8.5.3")].require("standard/Math/Numbers/Vector3");var S=t.n(O);const I=window[Symbol.for("X_ITE.X3D-8.5.3")].require("standard/Math/Algorithm");var b=t.n(I);function F(t,e,i){this.longitudeFirst=!e,this.degrees=!i,this.a=t.getSemiMajorAxis(),this.c=t.getSemiMinorAxis(),this.c2a2=Math.pow(t.getSemiMinorAxis()/this.a,2),this.ecc2=1-this.c2a2}F.prototype={constructor:F,convert:function(t,e){const i=t.z;if(this.longitudeFirst)var n=t.y,o=t.x;else n=t.x,o=t.y;return this.degrees&&(n*=Math.PI/180,o*=Math.PI/180),this.convertRadians(n,o,i,e)},convertRadians:function(t,e,i,n){const o=Math.sin(t),s=Math.pow(o,2),r=Math.cos(t),a=this.a/Math.sqrt(1-this.ecc2*s),l=(a+i)*r;return n.set(l*Math.cos(e),l*Math.sin(e),(a*this.c2a2+i)*o)},apply:function(t,e){if(this.applyRadians(t,e),this.degrees&&(e.x*=180/Math.PI,e.y*=180/Math.PI),this.longitudeFirst){const t=e.x;e.x=e.y,e.y=t}return e},applyRadians:function(t,e){const i=t.x,n=t.y,o=t.z,s=Math.sqrt(i*i+n*n);if(0==s)return e.set(Math.PI,0,o-this.c);let r=0,a=Math.atan2(n,i),l=0,h=this.a,c=h,d=this.ecc2;for(let t=0;t<30;++t){const t=l,e=r;r=Math.atan(o/s/(1-d*c/(c+l)));const i=Math.sin(r);if(c=h/Math.sqrt(1-d*i*i),l=s/Math.cos(r)-c,Math.abs(l-t)<.001&&Math.abs(r-e)<1e-10)break}return e.set(r,a,l)},normal:function(t,e){const i=this.applyRadians(t,e),n=i.x,o=i.y,s=Math.cos(n),r=Math.cos(o)*s,a=Math.sin(o)*s,l=Math.sin(n);return e.set(r,a,l)}};const C=F;g().set("standard/Geospatial/Geodetic",C);const x=C,v=1e7,N=5e5,M=.9996;function T(t,e,i,n){const o=t.getSemiMajorAxis(),s=1-Math.pow(t.getSemiMinorAxis()/o,2),r=s/(1-s),a=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s));this.southernHemisphere=!i,this.eastingFirst=!n,this.a=o,this.ecc2=s,this.EE=r,this.E8=8*r,this.E9=9*r,this.E252=252*r,this.e1=a,this.A=M*(o*(1-s/4-3*s*s/64-5*s*s*s/256)),this.B=3*a/2-7*a*a*a/32,this.C=21*a*a/16-55*a*a*a*a/32,this.D=151*a*a*a/96,this.E=o*(1-s),this.W=1-s/4-3*s*s/64-5*s*s*s/256,this.X=3*s/8+3*s*s/32+45*s*s*s/1024,this.Y=15*s*s/256+45*s*s*s/1024,this.Z=35*s*s*s/3072,this.longitude0=b().radians(6*e-183),this.geodeticConverter=new x(t,!0,!0)}T.prototype={constructor:T,convert:function(t,e){if(this.eastingFirst)var i=t.y,n=t.x;else i=t.x,n=t.y;let o=this.southernHemisphere;i<0&&(o=!this.southernHemisphere,i=-i),o&&(i-=v),n-=N;const s=i/this.A,r=s+this.B*Math.sin(2*s)+this.C*Math.sin(4*s)+this.D*Math.sin(6*s),a=Math.pow(Math.sin(r),2),l=Math.cos(r),h=Math.tan(r),c=this.a/Math.sqrt(1-this.ecc2*a),d=Math.pow(h,2),u=Math.pow(h,8),p=this.EE*d,g=p*p,_=this.E/Math.pow(1-this.ecc2*a,1.5),w=n/(c*M),m=(5+3*d+10*p-4*g-this.E9)*Math.pow(w,4)/24,f=(61+90*d+298*p+45*u-this.E252-3*g)*Math.pow(w,6)/720,y=(5-2*p+28*d-3*g+this.E8+24*u)*Math.pow(w,5)/120,O=r-c*h/_*(w*w/2-m+f),S=this.longitude0+(w-(1+2*d+p)*Math.pow(w,3)/6+y)/l;return this.geodeticConverter.convertRadians(O,S,t.z,e)},apply:function(t,e){const i=this.geodeticConverter.applyRadians(t,e),n=i.x,o=i.y,s=Math.tan(n),r=Math.cos(n),a=this.EE,l=this.a/Math.sqrt(1-this.ecc2*Math.pow(Math.sin(n),2)),h=s*s,c=h*h*h,d=a*r*r,u=r*(o-this.longitude0),p=this.a*(this.W*n-this.X*Math.sin(2*n)+this.Y*Math.sin(4*n)-this.Z*Math.sin(6*n)),g=M*l*(u+(1-h+d)*Math.pow(u,3)/6+(5-18*c+72*d-58*a)*Math.pow(u,5)/120)+N;let _=M*(p+l*s*(u*u/2+(5-h+9*d+4*d*d)*Math.pow(u,4)/24+(61-58*c+600*d-330*a)*Math.pow(u,6)/720));return n<0?(_+=v,this.southernHemisphere||(_=-_)):this.southernHemisphere&&(_=-_),this.eastingFirst?e.set(g,_,i.z):e.set(_,g,i.z)}};const G=T;g().set("standard/Geospatial/UniversalTransverseMercator",G);const D=G;function E(){}E.prototype={constructor:E,convert:function(t,e){return e.assign(t)},apply:function(t,e){return e.assign(t)},slerp:function(t,e,i){const n=t.magnitude(),o=e.magnitude();return t.normalize(),e.normalize(),b().simpleSlerp(t,e,i).multiply(b().lerp(n,o,i))}};const V=E;g().set("x_ite/Browser/Geospatial/Geocentric",V);const z=V;let j=0;const X=j++,P=j++,B=j++,k={GD:X,GDC:X,UTM:P,GC:B,GCC:B,GS:B},L=/^Z(\d+)$/,A={GD:X,UTM:P,GC:B,getReferenceFrame:function(t,e){switch(this.getCoordinateSystem(t)){case X:return new x(this.getEllipsoid(t),this.getLatitudeFirst(t),e);case P:return new D(this.getEllipsoid(t),this.getZone(t),this.getNorthernHemisphere(t),this.getNorthingFirst(t));case B:return new z}return new x(y.WE,!0,e)},getElevationFrame:function(t,e){return new x(this.getEllipsoid(t),!0,e)},getCoordinateSystem:function(t){for(const e of t){const t=k[e];if(void 0!==t)return t}return X},getEllipsoid:function(t){for(const e of t){const t=y[e];if(void 0!==t)return t}return y.WE},getEllipsoidString:function(t){for(const e of t){if(void 0!==y[e])return e}return"WE"},isStandardOrder:function(t){switch(this.getCoordinateSystem(t)){case X:return this.getLatitudeFirst(t);case P:return this.getNorthingFirst(t);case B:return!0}return this.getLatitudeFirst(t)},getLatitudeFirst:function(t){for(const e of t)if("longitude_first"===e)return!1;return!0},getNorthingFirst:function(t){for(const e of t)if("easting_first"===e)return!1;return!0},getZone:function(t){for(const e of t){const t=e.match(L);if(t)return parseInt(t[1])}return 1},getNorthernHemisphere:function(t){for(const e of t)if("S"===e)return!1;return!0}};g().set("x_ite/Browser/Geospatial/Geospatial",A);const R=A,U=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Base/X3DCast");var q=t.n(U);const W=window[Symbol.for("X_ITE.X3D-8.5.3")].require("standard/Math/Numbers/Matrix4");var H=t.n(W),Y=new(S())(0,0,0),Z=new(S())(0,0,0),K=new(S())(0,0,0),J=new(S())(0,0,0),Q=new(S())(0,0,0),$=new(S())(0,0,0);function tt(t){this.addType(u().X3DGeospatialObject),this.radians=!1,this.origin=new(S())(0,0,0),this.originMatrix=new(H()),this.invOriginMatrix=new(H())}function et(t,e){return this.invOriginMatrix.multVecMatrix(this.referenceFrame.convert(t,e))}function it(t,e){return this.referenceFrame.apply(this.originMatrix.multVecMatrix(Y.assign(t)),e)}function nt(t,e){return this.invOriginMatrix.multDirMatrix(this.elevationFrame.normal(this.originMatrix.multVecMatrix(Y.assign(t)),e))}function ot(t,e){return st.call(this,t,e).multRight(this.invOriginMatrix)}function st(t,e){return this.referenceFrame.convert(t,K),this.elevationFrame.normal(K,Q),J.set(0,0,1).cross(Q),J.equals(S().Zero)&&J.set(1,0,0),$.assign(J).cross(Q),J.normalize(),$.normalize(),e.set(J.x,J.y,J.z,0,Q.x,Q.y,Q.z,0,$.x,$.y,$.z,0,K.x,K.y,K.z,1)}tt.prototype={constructor:tt,initialize:function(){this._geoSystem.addInterest("set_geoSystem__",this),this._geoOrigin.addInterest("set_geoOrigin__",this),this.set_geoSystem__(),this.set_geoOrigin__()},set_geoSystem__:function(){this.coordinateSystem=R.getCoordinateSystem(this._geoSystem),this.referenceFrame=R.getReferenceFrame(this._geoSystem,this.radians),this.elevationFrame=R.getElevationFrame(this._geoSystem,this.radians),this.standardOrder=R.isStandardOrder(this._geoSystem)},set_geoOrigin__:function(){this.geoOriginNode&&(this.geoOriginNode.removeInterest("set_origin__",this),this.geoOriginNode.removeInterest("set_rotateYUp__",this),this.geoOriginNode.removeInterest("addNodeEvent",this)),this.geoOriginNode=q()(u().GeoOrigin,this._geoOrigin),this.geoOriginNode&&(this.geoOriginNode.addInterest("set_origin__",this),this.geoOriginNode.addInterest("set_rotateYUp__",this),this.geoOriginNode.addInterest("addNodeEvent",this)),this.set_origin__(),this.set_rotateYUp__()},set_origin__:function(){this.geoOriginNode?this.geoOriginNode.getOrigin(this.origin):this.origin.set(0,0,0),this.set_originMatrix__()},set_originMatrix__:function(){if(this.geoOriginNode){var t=this.origin;this.elevationFrame.normal(t,Q),J.set(0,0,1).cross(Q),J.equals(S().Zero)&&J.set(1,0,0),$.assign(J).cross(Q),J.normalize(),$.normalize(),this.originMatrix.set(J.x,J.y,J.z,0,Q.x,Q.y,Q.z,0,$.x,$.y,$.z,0,t.x,t.y,t.z,1),this.invOriginMatrix.assign(this.originMatrix).inverse()}},set_rotateYUp__:function(){this.geoOriginNode&&this.geoOriginNode._rotateYUp.getValue()?(this.getCoord=et,this.getGeoCoord=it,this.getGeoUpVector=nt,this.getLocationMatrix=ot):(delete this.getCoord,delete this.getGeoCoord,delete this.getGeoUpVector,delete this.getLocationMatrix)},getReferenceFrame:function(){return this.referenceFrame},getStandardOrder:function(){return this.standardOrder},getCoord:function(t,e){return this.referenceFrame.convert(t,e).subtract(this.origin)},getGeoCoord:function(t,e){return this.referenceFrame.apply(Y.assign(t).add(this.origin),e)},getGeoElevation:function(t){return this.getGeoCoord(t,Z).z},getGeoUpVector:function(t,e){return this.elevationFrame.normal(Y.assign(t).add(this.origin),e)},getLocationMatrix:function(t,e){var i=this.origin,n=st.call(this,t,e);return n[12]-=i.x,n[13]-=i.y,n[14]-=i.z,n},dispose:function(){}};const rt=tt;g().set("x_ite/Components/Geospatial/X3DGeospatialObject",rt);const at=rt,lt=window[Symbol.for("X_ITE.X3D-8.5.3")].require("standard/Math/Geometry/Triangle3");var ht=t.n(lt);function ct(t){c().call(this,t),at.call(this,t),this.addType(u().GeoCoordinate)}ct.prototype=Object.assign(Object.create(c().prototype),at.prototype,{constructor:ct,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"point",new(o().MFVec3d))]),getTypeName:function(){return"GeoCoordinate"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"coord"},initialize:function(){c().prototype.initialize.call(this),at.prototype.initialize.call(this)},set1Point:function(){const t=new(S())(0,0,0);return function(e,i){this._point[e]=this.getGeoCoord(i,t)}}(),get1Point:function(){const t=new(S())(0,0,0);return function(e,i){if(e<this.length){const n=this.point;return e*=3,this.getCoord(t.set(n[e],n[e+1],n[e+2]),i)}return i.set(0,0,0)}}(),addPoint:function(){const t=new(S())(0,0,0),e=new(S())(0,0,0);return function(i,n){if(i<this.length){const o=this.point;i*=3,this.getCoord(t.set(o[i],o[i+1],o[i+2]),e),n.push(e[0],e[1],e[2],1)}else n.push(0,0,0,1)}}(),addPoints:function(){const t=new(S())(0,0,0),e=new(S())(0,0,0);return function(i,n){const o=this.point;for(let n=0,s=3*this.length;n<s;n+=3)this.getCoord(t.set(o[n],o[n+1],o[n+2]),e),i.push(e[0],e[1],e[2],1);for(let t=3*this.length,e=3*n;t<e;t+=3)i.push(0,0,0,1)}}(),getNormal:function(){const t=new(S())(0,0,0),e=new(S())(0,0,0),i=new(S())(0,0,0);return function(n,o,s){const r=this.length;return n<r&&o<r&&s<r?ht().normal(this.get1Point(n,t),this.get1Point(o,e),this.get1Point(s,i),new(S())(0,0,0)):new(S())(0,0,0)}}(),getQuadNormal:function(){const t=new(S())(0,0,0),e=new(S())(0,0,0),i=new(S())(0,0,0),n=new(S())(0,0,0);return function(o,s,r,a){const l=this.length;return o<l&&s<l&&r<l&&a<l?ht().quadNormal(this.get1Point(o,t),this.get1Point(s,e),this.get1Point(r,i),this.get1Point(a,n),new(S())(0,0,0)):new(S())(0,0,0)}}(),dispose:function(){at.prototype.dispose.call(this),c().prototype.dispose.call(this)}});const dt=ct;g().set("x_ite/Components/Geospatial/GeoCoordinate",dt);const ut=dt,pt=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Rendering/X3DGeometryNode");var gt=t.n(pt);const _t=window[Symbol.for("X_ITE.X3D-8.5.3")].require("standard/Math/Numbers/Vector2");var wt=t.n(_t);function mt(t){gt().call(this,t),at.call(this,t),this.addType(u().GeoElevationGrid),this._creaseAngle.setUnit("angle"),this._height.setUnit("length"),this.colorNode=null,this.texCoordNode=null,this.normalNode=null}mt.prototype=Object.assign(Object.create(gt().prototype),at.prototype,{constructor:mt,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().initializeOnly,"geoGridOrigin",new(o().SFVec3d)),new(r())(u().initializeOnly,"xDimension",new(o().SFInt32)),new(r())(u().initializeOnly,"zDimension",new(o().SFInt32)),new(r())(u().initializeOnly,"xSpacing",new(o().SFDouble)(1)),new(r())(u().initializeOnly,"zSpacing",new(o().SFDouble)(1)),new(r())(u().inputOutput,"yScale",new(o().SFFloat)(1)),new(r())(u().initializeOnly,"solid",new(o().SFBool)(!0)),new(r())(u().initializeOnly,"ccw",new(o().SFBool)(!0)),new(r())(u().initializeOnly,"creaseAngle",new(o().SFDouble)),new(r())(u().initializeOnly,"colorPerVertex",new(o().SFBool)(!0)),new(r())(u().initializeOnly,"normalPerVertex",new(o().SFBool)(!0)),new(r())(u().inputOutput,"color",new(o().SFNode)),new(r())(u().inputOutput,"texCoord",new(o().SFNode)),new(r())(u().inputOutput,"normal",new(o().SFNode)),new(r())(u().inputOutput,"height",new(o().MFDouble)(0,0))]),getTypeName:function(){return"GeoElevationGrid"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"geometry"},initialize:function(){gt().prototype.initialize.call(this),at.prototype.initialize.call(this),this._color.addInterest("set_color__",this),this._texCoord.addInterest("set_texCoord__",this),this._normal.addInterest("set_normal__",this),this.set_color__(),this.set_texCoord__(),this.set_normal__()},set_color__:function(){this.colorNode&&(this.colorNode.removeInterest("requestRebuild",this),this.colorNode._transparent.removeInterest("set_transparent__",this)),this.colorNode=q()(u().X3DColorNode,this._color),this.colorNode?(this.colorNode.addInterest("requestRebuild",this),this.colorNode._transparent.addInterest("set_transparent__",this),this.set_transparent__()):this.setTransparent(!1)},set_transparent__:function(){this.setTransparent(this.colorNode.getTransparent())},set_texCoord__:function(){this.texCoordNode&&this.texCoordNode.removeInterest("requestRebuild",this),this.texCoordNode=q()(u().X3DTextureCoordinateNode,this._texCoord),this.texCoordNode&&this.texCoordNode.addInterest("requestRebuild",this),this.setTextureCoordinate(this.texCoordNode)},set_normal__:function(){this.normalNode&&this.normalNode.removeInterest("requestRebuild",this),this.normalNode=q()(u().X3DNormalNode,this._normal),this.normalNode&&this.normalNode.addInterest("requestRebuild",this)},getColor:function(){return this.colorNode},getTexCoord:function(){return this.texCoordNode},getNormal:function(){return this.normalNode},getHeight:function(t){return t<this._height.length?this._height[t]*this._yScale.getValue():0},createTexCoords:function(){for(var t=[],e=this._xDimension.getValue(),i=this._zDimension.getValue(),n=e-1,o=i-1,s=0;s<i;++s)for(var r=0;r<e;++r)t.push(new(wt())(r/n,s/o));return t},createNormals:function(t,e,i){for(var n=!this._ccw.getValue(),o=[],s=[],r=0;r<t.length;++r)o[r]=[];for(var a=0;a<e.length;a+=3){var l=e[a],h=e[a+1],c=e[a+2];o[l].push(s.length),o[h].push(s.length+1),o[c].push(s.length+2);var d=ht().normal(t[l],t[h],t[c],new(S())(0,0,0));n&&d.negate(),s.push(d),s.push(d),s.push(d)}return this.refineNormals(o,s,this._creaseAngle.getValue())},createCoordIndex:function(){for(var t=[],e=this._xDimension.getValue(),i=e-1,n=this._zDimension.getValue()-1,o=0;o<n;++o)for(var s=0;s<i;++s){var r=o*e+s,a=(o+1)*e+s,l=(o+1)*e+(s+1),h=o*e+(s+1);t.push(r),t.push(l),t.push(a),t.push(r),t.push(h),t.push(l)}return t},createPoints:function(){var t=[],e=this._xDimension.getValue(),i=this._zDimension.getValue(),n=this._xSpacing.getValue(),o=this._zSpacing.getValue();if(this.getStandardOrder())for(var s=0;s<i;++s)for(var r=0;r<e;++r){(a=new(S())(o*s,n*r,this.getHeight(r+s*e))).add(this._geoGridOrigin.getValue()),t.push(this.getCoord(a,a))}else for(s=0;s<i;++s)for(r=0;r<e;++r){var a;(a=new(S())(n*r,o*s,this.getHeight(r+s*e))).add(this._geoGridOrigin.getValue()),t.push(this.getCoord(a,a))}return t},build:function(){if(!(this._xDimension.getValue()<2||this._zDimension.getValue()<2)){var t=this._colorPerVertex.getValue(),e=this._normalPerVertex.getValue(),i=this.createCoordIndex(),n=this.getColor(),o=this.getTexCoord(),s=this.getNormal(),r=this.createPoints(),a=this.getColors(),l=this.getMultiTexCoords(),h=this.getNormals(),c=this.getVertices(),d=0;if(o)o.init(l);else{var u=this.createTexCoords(),p=this.getTexCoords();l.push(p)}for(var g=0;g<i.length;++d)for(var _=0;_<6;++_,++g){var w=i[g],m=r[w];if(n&&(t?n.addColor(w,a):n.addColor(d,a)),o)o.addTexCoord(w,l);else{var f=u[w];p.push(f.x,f.y,0,1)}s&&(e?s.addVector(w,h):s.addVector(d,h)),c.push(m.x,m.y,m.z,1)}if(!s)for(var y=this.createNormals(r,i),O=0;O<y.length;++O){var S=y[O];h.push(S.x,S.y,S.z)}this.setSolid(this._solid.getValue()),this.setCCW(this._ccw.getValue())}},dispose:function(){at.prototype.dispose.call(this),gt().prototype.dispose.call(this)}});const ft=mt;g().set("x_ite/Components/Geospatial/GeoElevationGrid",ft);const yt=ft,Ot=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Core/X3DChildNode");var St=t.n(Ot);const It=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Grouping/X3DBoundedObject");var bt=t.n(It);const Ft=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Rendering/TraverseType");var Ct=t.n(Ft);const xt=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Grouping/Group");var vt=t.n(xt);const Nt=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Networking/Inline");var Mt=t.n(Nt);const Tt=window[Symbol.for("X_ITE.X3D-8.5.3")].require("standard/Math/Geometry/Box3");var Gt=t.n(Tt),Dt=new(S())(0,0,0);function Et(t){St().call(this,t),bt().call(this,t),at.call(this,t),this.addType(u().GeoLOD),this._range.setUnit("length"),this.unload=!1,this.rootGroup=new(vt())(this.getBrowser().getPrivateScene()),this.rootInline=new(Mt())(t),this.child1Inline=new(Mt())(t),this.child2Inline=new(Mt())(t),this.child3Inline=new(Mt())(t),this.child4Inline=new(Mt())(t),this.childrenLoaded=!1,this.childBBox=new(Gt()),this.keepCurrentLevel=!1,this.modelViewMatrix=new(H())}Et.prototype=Object.assign(Object.create(St().prototype),bt().prototype,at.prototype,{constructor:Et,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().initializeOnly,"rootUrl",new(o().MFString)),new(r())(u().initializeOnly,"child1Url",new(o().MFString)),new(r())(u().initializeOnly,"child2Url",new(o().MFString)),new(r())(u().initializeOnly,"child3Url",new(o().MFString)),new(r())(u().initializeOnly,"child4Url",new(o().MFString)),new(r())(u().initializeOnly,"center",new(o().SFVec3d)),new(r())(u().initializeOnly,"range",new(o().SFFloat)(10)),new(r())(u().outputOnly,"level_changed",new(o().SFInt32)(-1)),new(r())(u().inputOutput,"visible",new(o().SFBool)(!0)),new(r())(u().inputOutput,"bboxDisplay",new(o().SFBool)),new(r())(u().initializeOnly,"bboxSize",new(o().SFVec3f)(-1,-1,-1)),new(r())(u().initializeOnly,"bboxCenter",new(o().SFVec3f)),new(r())(u().initializeOnly,"rootNode",new(o().MFNode)),new(r())(u().outputOnly,"children",new(o().MFNode))]),getTypeName:function(){return"GeoLOD"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){St().prototype.initialize.call(this),bt().prototype.initialize.call(this),at.prototype.initialize.call(this),this._rootNode.addFieldInterest(this.rootGroup._children),this.rootGroup._children=this._rootNode,this.rootGroup.setPrivate(!0),this.rootGroup.setup(),this.rootInline._loadState.addInterest("set_rootLoadState__",this),this.child1Inline._loadState.addInterest("set_childLoadState__",this),this.child2Inline._loadState.addInterest("set_childLoadState__",this),this.child3Inline._loadState.addInterest("set_childLoadState__",this),this.child4Inline._loadState.addInterest("set_childLoadState__",this),this._rootUrl.addFieldInterest(this.rootInline._url),this._child1Url.addFieldInterest(this.child1Inline._url),this._child2Url.addFieldInterest(this.child2Inline._url),this._child3Url.addFieldInterest(this.child3Inline._url),this._child4Url.addFieldInterest(this.child4Inline._url),this.rootInline._load=!0,this.child1Inline._load=!1,this.child2Inline._load=!1,this.child3Inline._load=!1,this.child4Inline._load=!1,this.rootInline._url=this._rootUrl,this.child1Inline._url=this._child1Url,this.child2Inline._url=this._child2Url,this.child3Inline._url=this._child3Url,this.child4Inline._url=this._child4Url,this.rootInline.setup(),this.child1Inline.setup(),this.child2Inline.setup(),this.child3Inline.setup(),this.child4Inline.setup()},getBBox:function(t,e){if(this._bboxSize.getValue().equals(this.getDefaultBBoxSize())){switch(this.childrenLoaded?this._level_changed.getValue():0){case 0:return this._rootNode.length?this.rootGroup.getBBox(t,e):this.rootInline.getBBox(t,e);case 1:{const i=this.childBBox;return t.set(),t.add(this.child1Inline.getBBox(i,e)),t.add(this.child2Inline.getBBox(i,e)),t.add(this.child3Inline.getBBox(i,e)),t.add(this.child4Inline.getBBox(i,e)),t}}return t.set()}return t.set(this._bboxSize.getValue(),this._bboxCenter.getValue())},set_rootLoadState__:function(){0===this._level_changed.getValue()&&(this._rootNode.length||this.rootInline.checkLoadState()===u().COMPLETE_STATE&&(this._children=this.rootInline.getInternalScene().getRootNodes(),this.childrenLoaded=!1))},set_childLoadState__:function(){if(1===this._level_changed.getValue()){var t=0;if(this.child1Inline.checkLoadState()!==u().COMPLETE_STATE&&this.child1Inline.checkLoadState()!==u().FAILED_STATE||++t,this.child2Inline.checkLoadState()!==u().COMPLETE_STATE&&this.child2Inline.checkLoadState()!==u().FAILED_STATE||++t,this.child3Inline.checkLoadState()!==u().COMPLETE_STATE&&this.child3Inline.checkLoadState()!==u().FAILED_STATE||++t,this.child4Inline.checkLoadState()!==u().COMPLETE_STATE&&this.child4Inline.checkLoadState()!==u().FAILED_STATE||++t,4===t){this.childrenLoaded=!0;var e=this._children;e.length=0;for(var i=0,n=(o=this.child1Inline.getInternalScene().getRootNodes()).length;i<n;++i)e.push(o[i]);for(i=0,n=(o=this.child2Inline.getInternalScene().getRootNodes()).length;i<n;++i)e.push(o[i]);for(i=0,n=(o=this.child3Inline.getInternalScene().getRootNodes()).length;i<n;++i)e.push(o[i]);var o;for(i=0,n=(o=this.child4Inline.getInternalScene().getRootNodes()).length;i<n;++i)e.push(o[i])}}},set_childCameraObject__:function(){this.setCameraObject(this.child1Inline.getCameraObject()||this.child2Inline.getCameraObject()||this.child3Inline.getCameraObject()||this.child4Inline.getCameraObject())},set_childPickableObject__:function(){this.setPickableObject(this.child1Inline.getPickableObject()||this.child2Inline.getPickableObject()||this.child3Inline.getPickableObject()||this.child4Inline.getPickableObject())},getLevel:function(t){return this.getDistance(t)<this._range.getValue()?1:0},getDistance:function(t){return t.translate(this.getCoord(this._center.getValue(),Dt)),t.origin.magnitude()},traverse:function(t,e){switch(t){case Ct().PICKING:var i=this.getBrowser().getPickingHierarchy();return i.push(this),this.traverseChildren(t,e),void i.pop();case Ct().DISPLAY:var n=this.getLevel(this.modelViewMatrix.assign(e.getModelViewMatrix().get()));if(n!==this._level_changed.getValue())switch(this._level_changed=n,n){case 0:this.child1Inline._isCameraObject.removeInterest("set_childCameraObject__",this),this.child2Inline._isCameraObject.removeInterest("set_childCameraObject__",this),this.child3Inline._isCameraObject.removeInterest("set_childCameraObject__",this),this.child4Inline._isCameraObject.removeInterest("set_childCameraObject__",this),this.child1Inline._isPickableObject.removeInterest("set_childPickableObject__",this),this.child2Inline._isPickableObject.removeInterest("set_childPickableObject__",this),this.child3Inline._isPickableObject.removeInterest("set_childPickableObject__",this),this.child4Inline._isPickableObject.removeInterest("set_childPickableObject__",this),this._rootNode.length?(this.rootGroup._isCameraObject.addFieldInterest(this._isCameraObject),this.rootGroup._isPickableObject.addFieldInterest(this._isPickableObject),this.setCameraObject(this.rootGroup.getCameraObject()),this.setPickableObject(this.rootGroup.getPickableObject()),this._children=this._rootNode,this.childrenLoaded=!1):this.rootInline.checkLoadState()==u().COMPLETE_STATE&&(this.rootInline._isCameraObject.addFieldInterest(this._isCameraObject),this.rootInline._isPickableObject.addFieldInterest(this._isPickableObject),this.setCameraObject(this.rootInline.getCameraObject()),this.setPickableObject(this.rootInline.getPickableObject()),this._children=this.rootInline.getInternalScene().getRootNodes(),this.childrenLoaded=!1),this.unload&&(this.child1Inline._load=!1,this.child2Inline._load=!1,this.child3Inline._load=!1,this.child4Inline._load=!1);break;case 1:this._rootNode.length?(this.rootGroup._isCameraObject.removeFieldInterest(this._isCameraObject),this.rootGroup._isPickableObject.removeFieldInterest(this._isPickableObject)):(this.rootInline._isCameraObject.removeFieldInterest(this._isCameraObject),this.rootInline._isPickableObject.removeFieldInterest(this._isPickableObject)),this.child1Inline._isCameraObject.addInterest("set_childCameraObject__",this),this.child2Inline._isCameraObject.addInterest("set_childCameraObject__",this),this.child3Inline._isCameraObject.addInterest("set_childCameraObject__",this),this.child4Inline._isCameraObject.addInterest("set_childCameraObject__",this),this.child1Inline._isPickableObject.addInterest("set_childPickableObject__",this),this.child2Inline._isPickableObject.addInterest("set_childPickableObject__",this),this.child3Inline._isPickableObject.addInterest("set_childPickableObject__",this),this.child4Inline._isPickableObject.addInterest("set_childPickableObject__",this),this.set_childCameraObject__(),this.set_childPickableObject__(),this.child1Inline._load.getValue()?this.set_childLoadState__():(this.child1Inline._load=!0,this.child2Inline._load=!0,this.child3Inline._load=!0,this.child4Inline._load=!0)}return void this.traverseChildren(t,e);default:return void this.traverseChildren(t,e)}},traverseChildren:function(t,e){switch(this.childrenLoaded?this._level_changed.getValue():0){case 0:this._rootNode.length?this.rootGroup.traverse(t,e):this.rootInline.traverse(t,e);break;case 1:this.child1Inline.traverse(t,e),this.child2Inline.traverse(t,e),this.child3Inline.traverse(t,e),this.child4Inline.traverse(t,e)}},dispose:function(){at.prototype.dispose.call(this),bt().prototype.dispose.call(this),St().prototype.dispose.call(this)}});const Vt=Et;g().set("x_ite/Components/Geospatial/GeoLOD",Vt);const zt=Vt,jt=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Grouping/X3DTransformMatrix3DNode");var Xt=t.n(jt),Pt=new(H());function Bt(t){Xt().call(this,t),at.call(this,t),this.addType(u().GeoLocation)}Bt.prototype=Object.assign(Object.create(Xt().prototype),at.prototype,{constructor:Bt,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"geoCoords",new(o().SFVec3d)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().inputOutput,"visible",new(o().SFBool)(!0)),new(r())(u().inputOutput,"bboxDisplay",new(o().SFBool)),new(r())(u().initializeOnly,"bboxSize",new(o().SFVec3f)(-1,-1,-1)),new(r())(u().initializeOnly,"bboxCenter",new(o().SFVec3f)),new(r())(u().inputOnly,"addChildren",new(o().MFNode)),new(r())(u().inputOnly,"removeChildren",new(o().MFNode)),new(r())(u().inputOutput,"children",new(o().MFNode))]),getTypeName:function(){return"GeoLocation"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){Xt().prototype.initialize.call(this),at.prototype.initialize.call(this),this.addInterest("eventsProcessed",this),this.eventsProcessed()},eventsProcessed:function(){this.setMatrix(this.getLocationMatrix(this._geoCoords.getValue(),Pt))},dispose:function(){at.prototype.dispose.call(this),Xt().prototype.dispose.call(this)}});const kt=Bt;g().set("x_ite/Components/Geospatial/GeoLocation",kt);const Lt=kt,At=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Core/X3DInfoNode");var Rt=t.n(At);const Ut=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Networking/X3DUrlObject");var qt=t.n(Ut);function Wt(t){Rt().call(this,t),qt().call(this,t),this.addType(u().GeoMetadata)}Wt.prototype=Object.assign(Object.create(Rt().prototype),qt().prototype,{constructor:Wt,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().inputOutput,"url",new(o().MFString)),new(r())(u().inputOutput,"load",new(o().SFBool)(!0)),new(r())(u().inputOutput,"autoRefresh",new(o().SFTime)),new(r())(u().inputOutput,"autoRefreshTimeLimit",new(o().SFTime)(3600)),new(r())(u().inputOutput,"summary",new(o().MFString)),new(r())(u().inputOutput,"data",new(o().MFNode))]),getTypeName:function(){return"GeoMetadata"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){Rt().prototype.initialize.call(this),qt().prototype.initialize.call(this)},requestImmediateLoad:function(t=!0){},requestUnload:function(){},set_load__:function(){},set_url__:function(){},dispose:function(){qt().prototype.dispose.call(this),Rt().prototype.dispose.call(this)}});const Ht=Wt;g().set("x_ite/Components/Geospatial/GeoMetadata",Ht);const Yt=Ht,Zt=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Core/X3DNode");var Kt=t.n(Zt);function Jt(t){Kt().call(this,t),this.addType(u().GeoOrigin),this.radians=!1}Jt.prototype=Object.assign(Object.create(Kt().prototype),{constructor:Jt,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"geoCoords",new(o().SFVec3d)),new(r())(u().initializeOnly,"rotateYUp",new(o().SFBool))]),getTypeName:function(){return"GeoOrigin"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"geoOrigin"},initialize:function(){Kt().prototype.initialize.call(this),this._geoSystem.addInterest("set_geoSystem__",this),this.set_geoSystem__()},set_geoSystem__:function(){this.referenceFrame=R.getReferenceFrame(this._geoSystem,this.radians)},getOrigin:function(t){return this.referenceFrame.convert(this._geoCoords.getValue(),t)}});const Qt=Jt;g().set("x_ite/Components/Geospatial/GeoOrigin",Qt);const $t=Qt,te=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Interpolation/X3DInterpolatorNode");var ee=t.n(te);function ie(t){ee().call(this,t),at.call(this,t),this.addType(u().GeoPositionInterpolator),this._value_changed.setUnit("length"),this.geocentric=new z}ie.prototype=Object.assign(Object.create(ee().prototype),at.prototype,{constructor:ie,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOnly,"set_fraction",new(o().SFFloat)),new(r())(u().inputOutput,"key",new(o().MFFloat)),new(r())(u().inputOutput,"keyValue",new(o().MFVec3d)),new(r())(u().outputOnly,"value_changed",new(o().SFVec3d)),new(r())(u().outputOnly,"geovalue_changed",new(o().SFVec3d))]),getTypeName:function(){return"GeoPositionInterpolator"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},setup:function(){at.prototype.initialize.call(this),ee().prototype.setup.call(this)},initialize:function(){ee().prototype.initialize.call(this),this._keyValue.addInterest("set_keyValue__",this)},set_keyValue__:function(){const t=this._key,e=this._keyValue;e.length<t.length&&e.resize(t.length,e.length?e[e.length-1]:new(o().SFVec3f))},interpolate:function(){const t=new(S())(0,0,0),e=new(S())(0,0,0),i=new(S())(0,0,0);return function(n,o,s){this.getCoord(this._keyValue[n].getValue(),t),this.getCoord(this._keyValue[o].getValue(),e);const r=this.geocentric.slerp(t,e,s);this._geovalue_changed=this.getGeoCoord(r,i),this._value_changed=r}}(),dispose:function(){at.prototype.dispose.call(this),ee().prototype.dispose.call(this)}});const ne=ie;g().set("x_ite/Components/Geospatial/GeoPositionInterpolator",ne);const oe=ne,se=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/EnvironmentalSensor/X3DEnvironmentalSensorNode");var re=t.n(se);const ae=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/EnvironmentalSensor/ProximitySensor");var le=t.n(ae),he=new(S())(0,0,0);function ce(t){re().call(this,t),at.call(this,t),this.addType(u().GeoProximitySensor),this._position_changed.setUnit("length"),this._centerOfRotation_changed.setUnit("length"),this.proximitySensor=new(le())(t),this.setCameraObject(this.proximitySensor.getCameraObject()),this.setPickableObject(this.proximitySensor.getPickableObject())}ce.prototype=Object.assign(Object.create(re().prototype),at.prototype,{constructor:ce,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"enabled",new(o().SFBool)(!0)),new(r())(u().inputOutput,"size",new(o().SFVec3f)),new(r())(u().inputOutput,"center",new(o().SFVec3f)),new(r())(u().outputOnly,"isActive",new(o().SFBool)),new(r())(u().outputOnly,"enterTime",new(o().SFTime)),new(r())(u().outputOnly,"exitTime",new(o().SFTime)),new(r())(u().outputOnly,"geoCoord_changed",new(o().SFVec3d)),new(r())(u().outputOnly,"position_changed",new(o().SFVec3f)),new(r())(u().outputOnly,"orientation_changed",new(o().SFRotation)),new(r())(u().outputOnly,"centerOfRotation_changed",new(o().SFVec3f))]),getTypeName:function(){return"GeoProximitySensor"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){re().prototype.initialize.call(this),at.prototype.initialize.call(this),this._enabled.addFieldInterest(this.proximitySensor._enabled),this._size.addFieldInterest(this.proximitySensor._size),this._center.addFieldInterest(this.proximitySensor._center),this.proximitySensor._isCameraObject.addFieldInterest(this._isCameraObject),this.proximitySensor._isPickableObject.addFieldInterest(this._isPickableObject),this.proximitySensor._isActive.addFieldInterest(this._isActive),this.proximitySensor._enterTime.addFieldInterest(this._enterTime),this.proximitySensor._exitTime.addFieldInterest(this._exitTime),this.proximitySensor._position_changed.addFieldInterest(this._position_changed),this.proximitySensor._orientation_changed.addFieldInterest(this._orientation_changed),this.proximitySensor._centerOfRotation_changed.addFieldInterest(this._centerOfRotation_changed),this.proximitySensor._position_changed.addInterest("set_position__",this),this.proximitySensor._enabled=this._enabled,this.proximitySensor._size=this._size,this.proximitySensor._center=this._center,this.proximitySensor.setup()},set_position__:function(t){this._geoCoord_changed=this.getGeoCoord(this.proximitySensor._position_changed.getValue(),he)},traverse:function(t,e){this.proximitySensor.traverse(t,e)},dispose:function(){at.prototype.dispose.call(this),re().prototype.dispose.call(this)}});const de=ce;g().set("x_ite/Components/Geospatial/GeoProximitySensor",de);const ue=de,pe=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/PointingDeviceSensor/X3DTouchSensorNode");var ge=t.n(pe),_e=new(H()),we=new(S())(0,0,0);function me(t){ge().call(this,t),at.call(this,t),this.addType(u().GeoTouchSensor),this._hitPoint_changed.setUnit("length")}me.prototype=Object.assign(Object.create(ge().prototype),at.prototype,{constructor:me,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().inputOutput,"description",new(o().SFString)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"enabled",new(o().SFBool)(!0)),new(r())(u().outputOnly,"hitTexCoord_changed",new(o().SFVec2f)),new(r())(u().outputOnly,"hitNormal_changed",new(o().SFVec3f)),new(r())(u().outputOnly,"hitPoint_changed",new(o().SFVec3f)),new(r())(u().outputOnly,"hitGeoCoord_changed",new(o().SFVec3d)),new(r())(u().outputOnly,"isOver",new(o().SFBool)),new(r())(u().outputOnly,"isActive",new(o().SFBool)),new(r())(u().outputOnly,"touchTime",new(o().SFTime))]),getTypeName:function(){return"GeoTouchSensor"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){ge().prototype.initialize.call(this),at.prototype.initialize.call(this)},set_over__:function(t,e,i,n,o){if(ge().prototype.set_over__.call(this,t,e,i,n,o),this._isOver.getValue()){var s=e.intersection;_e.assign(i).inverse(),this._hitTexCoord_changed=s.texCoord,this._hitNormal_changed=i.multMatrixDir(s.normal.copy()).normalize(),this._hitPoint_changed=_e.multVecMatrix(s.point.copy()),this._hitGeoCoord_changed=this.getGeoCoord(this._hitPoint_changed.getValue(),we)}},dispose:function(){at.prototype.dispose.call(this),ge().prototype.dispose.call(this)}});const fe=me;g().set("x_ite/Components/Geospatial/GeoTouchSensor",fe);const ye=fe;var Oe=new(H()),Se=new(H());function Ie(t){Xt().call(this,t),at.call(this,t),this.addType(u().GeoTransform),this._translation.setUnit("length")}Ie.prototype=Object.assign(Object.create(Xt().prototype),at.prototype,{constructor:Ie,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().inputOutput,"translation",new(o().SFVec3f)),new(r())(u().inputOutput,"rotation",new(o().SFRotation)),new(r())(u().inputOutput,"scale",new(o().SFVec3f)(1,1,1)),new(r())(u().inputOutput,"scaleOrientation",new(o().SFRotation)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"geoCenter",new(o().SFVec3d)),new(r())(u().inputOutput,"visible",new(o().SFBool)(!0)),new(r())(u().inputOutput,"bboxDisplay",new(o().SFBool)),new(r())(u().initializeOnly,"bboxSize",new(o().SFVec3f)(-1,-1,-1)),new(r())(u().initializeOnly,"bboxCenter",new(o().SFVec3f)),new(r())(u().inputOnly,"addChildren",new(o().MFNode)),new(r())(u().inputOnly,"removeChildren",new(o().MFNode)),new(r())(u().inputOutput,"children",new(o().MFNode))]),getTypeName:function(){return"GeoTransform"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){Xt().prototype.initialize.call(this),at.prototype.initialize.call(this),this.addInterest("eventsProcessed",this),this.eventsProcessed()},eventsProcessed:function(){this.getLocationMatrix(this._geoCenter.getValue(),Se),Oe.set(this._translation.getValue(),this._rotation.getValue(),this._scale.getValue(),this._scaleOrientation.getValue()),this.setMatrix(Oe.multRight(Se).multLeft(Se.inverse()))},dispose:function(){at.prototype.dispose.call(this),Xt().prototype.dispose.call(this)}});const be=Ie;g().set("x_ite/Components/Geospatial/GeoTransform",be);const Fe=be,Ce=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Navigation/X3DViewpointNode");var xe=t.n(Ce);const ve=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Navigation/Viewpoint");var Ne=t.n(ve);const Me=window[Symbol.for("X_ITE.X3D-8.5.3")].require("x_ite/Components/Navigation/NavigationInfo");var Te=t.n(Me);const Ge=window[Symbol.for("X_ITE.X3D-8.5.3")].require("standard/Math/Numbers/Rotation4");var De=t.n(Ge);function Ee(t){xe().call(this,t),at.call(this,t),this.addType(u().GeoViewpoint),this._centerOfRotation.setUnit("length"),this._fieldOfView.setUnit("angle"),t.getSpecificationVersion()<=3.2&&(this.traverse=Ve),this.geoNavigationInfoNode=new(Te())(t),this.projectionMatrix=new(H()),this.elevation=0}function Ve(t,e){xe().prototype.traverse.call(this,t,e),this.geoNavigationInfoNode.traverse(t,e)}Ee.prototype=Object.assign(Object.create(xe().prototype),at.prototype,{constructor:Ee,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOnly,"set_bind",new(o().SFBool)),new(r())(u().inputOutput,"description",new(o().SFString)),new(r())(u().inputOutput,"position",new(o().SFVec3d)(0,0,1e5)),new(r())(u().inputOutput,"orientation",new(o().SFRotation)),new(r())(u().inputOutput,"centerOfRotation",new(o().SFVec3d)),new(r())(u().inputOutput,"fieldOfView",new(o().SFFloat)(.7854)),new(r())(u().inputOutput,"nearDistance",new(o().SFFloat)(-1)),new(r())(u().inputOutput,"farDistance",new(o().SFFloat)(-1)),new(r())(u().inputOutput,"viewAll",new(o().SFBool)(!1)),new(r())(u().inputOutput,"jump",new(o().SFBool)(!0)),new(r())(u().inputOutput,"retainUserOffsets",new(o().SFBool)),new(r())(u().inputOutput,"navType",new(o().MFString)("EXAMINE","ANY")),new(r())(u().inputOutput,"headlight",new(o().SFBool)(!0)),new(r())(u().initializeOnly,"speedFactor",new(o().SFFloat)(1)),new(r())(u().outputOnly,"isBound",new(o().SFBool)),new(r())(u().outputOnly,"bindTime",new(o().SFTime)),new(r())(u().inputOutput,"navigationInfo",new(o().SFNode))]),getTypeName:function(){return"GeoViewpoint"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){xe().prototype.initialize.call(this),at.prototype.initialize.call(this);const t=this.getBrowser().getContext();this.logarithmicDepthBuffer=t.HAS_FEATURE_FRAG_DEPTH,this._position.addInterest("set_position__",this),this._positionOffset.addInterest("set_position__",this),this._navType.addFieldInterest(this.geoNavigationInfoNode._type),this._headlight.addFieldInterest(this.geoNavigationInfoNode._headlight),this.geoNavigationInfoNode.setup(),this.set_position__()},getRelativeTransformation:Ne().prototype.getRelativeTransformation,setInterpolators:Ne().prototype.setInterpolators,getFieldOfView:Ne().prototype.getFieldOfView,getScreenScale:Ne().prototype.getScreenScale,getViewportSize:Ne().prototype.getViewportSize,getLookAtDistance:Ne().prototype.getLookAtDistance,getProjectionMatrixWithLimits:Ne().prototype.getProjectionMatrixWithLimits,getLogarithmicDepthBuffer:function(){return this.logarithmicDepthBuffer},setPosition:function(){const t=new(S())(0,0,0);return function(e){this._position.setValue(this.getGeoCoord(e,t))}}(),getPosition:function(){const t=new(S())(0,0,0);return function(){return this.getCoord(this._position.getValue(),t)}}(),set_position__:function(){const t=new(S())(0,0,0);return function(){this.getCoord(this._position.getValue(),t),this.elevation=this.getGeoElevation(t.add(this._positionOffset.getValue()))}}(),setOrientation:function(){const t=new(H()),e=new(De())(0,0,1,0);return function(i){const n=this.getLocationMatrix(this._position.getValue(),t).submatrix;e.setMatrix(n),this._orientation.setValue(e.inverse().multLeft(i))}}(),getOrientation:function(){const t=new(H()),e=new(De())(0,0,1,0);return function(){const i=this.getLocationMatrix(this._position.getValue(),t).submatrix;return e.setMatrix(i),e.multLeft(this._orientation.getValue())}}(),getCenterOfRotation:function(){const t=new(S())(0,0,0);return function(){return this.getCoord(this._centerOfRotation.getValue(),t)}}(),getMaxFarValue:function(){return 1e10},getUpVector:function(){const t=new(S())(0,0,0),e=new(S())(0,0,0);return function(i=!1){return!i||this.getUserPosition().magnitude()<65e5?(this.getCoord(this._position.getValue(),t),this.getGeoUpVector(t.add(this._positionOffset.getValue()),e)):e.assign(S().zAxis)}}(),getSpeedFactor:function(){return(Math.max(this.elevation,0)+10)/10*this._speedFactor.getValue()},dispose:function(){at.prototype.dispose.call(this),xe().prototype.dispose.call(this)}});const ze=Ee;g().set("x_ite/Components/Geospatial/GeoViewpoint",ze);const je=ze;i().addComponent({name:"Geospatial",types:{GeoCoordinate:ut,GeoElevationGrid:yt,GeoLOD:zt,GeoLocation:Lt,GeoMetadata:Yt,GeoOrigin:$t,GeoPositionInterpolator:oe,GeoProximitySensor:ue,GeoTouchSensor:ye,GeoTransform:Fe,GeoViewpoint:je},abstractTypes:{X3DGeospatialObject:at}});const Xe=void 0;g().set("assets/components/Geospatial",Xe)})();