/* X_ITE v12.2.4 */
const e=window[Symbol.for("X_ITE.X3D-12.2.4")];(()=>{var t={n:e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},d:(e,s)=>{for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const s=e.Components;var a=t.n(s);const i=e.Namespace;var n=t.n(i);const o=Symbol(),r=Symbol(),c=Symbol(),h=Symbol.for("X_ITE.X3DRoutingContext.processEvents");function l(){this[o]=new Set}Object.assign(l.prototype,{initialize(){const e=this.getElement();e.on("keydown.X3DKeyDeviceSensorContext",this[r].bind(this)),e.on("keyup.X3DKeyDeviceSensorContext",this[c].bind(this))},addKeyDeviceSensorNode(e){this[o].add(e)},removeKeyDeviceSensorNode(e){this[o].delete(e)},getKeyDeviceSensorNodes(){return this[o]},[r](e){this.advanceOnlyTime();for(const t of this[o])t.keydown(e);this[h]()},[c](e){this.advanceOnlyTime();for(const t of this[o])t.keyup(e);this[h]()},dispose(){this.getElement().off(".X3DKeyDeviceSensorContext")}});const y=l,d=n().add("X3DKeyDeviceSensorContext",y),_=e.Fields;var b=t.n(_);const k=e.X3DFieldDefinition;var u=t.n(k);const p=e.FieldDefinitionArray;var K=t.n(p);const S=e.X3DNode;var v=t.n(S);const w=e.X3DSensorNode;var g=t.n(w);const f=e.X3DConstants;var D=t.n(f);function P(e){g().call(this,e),this.addType(D().X3DKeyDeviceSensorNode)}Object.assign(Object.setPrototypeOf(P.prototype,g().prototype),{initialize(){g().prototype.initialize.call(this),this.getLive().addInterest("set_live__",this),this.set_live__()},set_live__(){this.getLive().getValue()?(this._enabled.addInterest("set_enabled__",this),this._enabled.getValue()&&this.enable()):(this._enabled.removeInterest("set_enabled__",this),this.disable())},set_enabled__(){this._enabled.getValue()?this.enable():this.disable()},enable(){this.getBrowser().addKeyDeviceSensorNode(this);for(const e of this.getBrowser().getKeyDeviceSensorNodes())e!==this&&e._enabled.getValue()&&(e._enabled=!1)},disable(){this.getBrowser().removeKeyDeviceSensorNode(this),this.release()},keydown(){},keyup(){},release(){}}),Object.defineProperties(P,v().getStaticProperties("X3DKeyDeviceSensorNode","KeyDeviceSensor",1));const O=P,C=n().add("X3DKeyDeviceSensorNode",O);function R(e){C.call(this,e),this.addType(D().KeySensor)}Object.assign(Object.setPrototypeOf(R.prototype,C.prototype),{keydown(e){switch(e.preventDefault(),this._isActive.getValue()||(this._isActive=!0),e.which){case 16:this._shiftKey=!0;break;case 17:this._controlKey=!0;break;case 18:this._altKey=!0;break;case 112:this._actionKeyPress=1;break;case 113:this._actionKeyPress=2;break;case 114:this._actionKeyPress=3;break;case 115:this._actionKeyPress=4;break;case 116:this._actionKeyPress=5;break;case 117:this._actionKeyPress=6;break;case 118:this._actionKeyPress=7;break;case 119:this._actionKeyPress=8;break;case 120:this._actionKeyPress=9;break;case 121:this._actionKeyPress=10;break;case 122:this._actionKeyPress=11;break;case 123:this._actionKeyPress=12;break;case 36:this._actionKeyPress=13;break;case 35:this._actionKeyPress=14;break;case 33:this._actionKeyPress=15;break;case 34:this._actionKeyPress=16;break;case 38:this._actionKeyPress=17;break;case 40:this._actionKeyPress=18;break;case 37:this._actionKeyPress=19;break;case 39:this._actionKeyPress=20;break;default:if(e.charCode||e.keyCode)switch(e.key){case"AltGraph":case"CapsLock":case"Insert":break;case"Backspace":this._keyPress=String.fromCharCode(8);break;case"Delete":this._keyPress=String.fromCharCode(127);break;case"Enter":this._keyPress="\n";break;case"Escape":this._keyPress=String.fromCharCode(27);break;case"Tab":this._keyPress="\t";break;default:1===e.key.length&&(this._keyPress=e.key)}}},keyup(e){switch(e.preventDefault(),e.which){case 16:this._shiftKey=!1;break;case 17:this._controlKey=!1;break;case 18:this._altKey=!1;break;case 112:this._actionKeyRelease=1;break;case 113:this._actionKeyRelease=2;break;case 114:this._actionKeyRelease=3;break;case 115:this._actionKeyRelease=4;break;case 116:this._actionKeyRelease=5;break;case 117:this._actionKeyRelease=6;break;case 118:this._actionKeyRelease=7;break;case 119:this._actionKeyRelease=8;break;case 120:this._actionKeyRelease=9;break;case 121:this._actionKeyRelease=10;break;case 122:this._actionKeyRelease=11;break;case 123:this._actionKeyRelease=12;break;case 36:this._actionKeyRelease=13;break;case 35:this._actionKeyRelease=14;break;case 33:this._actionKeyRelease=15;break;case 34:this._actionKeyRelease=16;break;case 38:this._actionKeyRelease=17;break;case 40:this._actionKeyRelease=18;break;case 37:this._actionKeyRelease=19;break;case 39:this._actionKeyRelease=20;break;default:if(e.charCode||e.keyCode)switch(e.key){case"AltGraph":case"CapsLock":case"Insert":break;case"Backspace":this._keyRelease=String.fromCharCode(8);break;case"Delete":this._keyRelease=String.fromCharCode(127);break;case"Enter":this._keyRelease="\n";break;case"Escape":this._keyRelease=String.fromCharCode(27);break;case"Tab":this._keyRelease="\t";break;default:1===e.key.length&&(this._keyRelease=e.key)}}this._isActive.getValue()&&(this._isActive=!1)},release(){this._shiftKey.getValue()&&(this._shiftKey=!1),this._controlKey.getValue()&&(this._controlKey=!1),this._altKey.getValue()&&(this._altKey=!1),this._isActive.getValue()&&(this._isActive=!1)}}),Object.defineProperties(R,{...v().getStaticProperties("KeySensor","KeyDeviceSensor",1,"children","3.0"),fieldDefinitions:{value:new(K())([new(u())(D().inputOutput,"metadata",new(b().SFNode)),new(u())(D().inputOutput,"description",new(b().SFString)),new(u())(D().inputOutput,"enabled",new(b().SFBool)(!0)),new(u())(D().outputOnly,"controlKey",new(b().SFBool)),new(u())(D().outputOnly,"shiftKey",new(b().SFBool)),new(u())(D().outputOnly,"altKey",new(b().SFBool)),new(u())(D().outputOnly,"actionKeyPress",new(b().SFInt32)),new(u())(D().outputOnly,"actionKeyRelease",new(b().SFInt32)),new(u())(D().outputOnly,"keyPress",new(b().SFString)),new(u())(D().outputOnly,"keyRelease",new(b().SFString)),new(u())(D().outputOnly,"isActive",new(b().SFBool))]),enumerable:!0}});const m=R,T=n().add("KeySensor",m);function F(e){C.call(this,e),this.addType(D().StringSensor)}Object.assign(Object.setPrototypeOf(F.prototype,C.prototype),{keydown(e){switch(e.preventDefault(),e.key){case"Backspace":this._isActive.getValue()&&this._deletionAllowed.getValue()&&this._enteredText.length&&(this._enteredText=this._enteredText.getValue().substring(0,this._enteredText.length-1));break;case"Enter":this._finalText=this._enteredText,this._enteredText.set(""),this._isActive.getValue()&&(this._isActive=!1);break;case"Escape":this._enteredText.set(""),this._isActive.getValue()&&(this._isActive=!1);break;case"Tab":break;default:(e.charCode||e.keyCode)&&1===e.key.length&&(this._isActive.getValue()||(this._isActive=!0,this._enteredText=""),this._enteredText=this._enteredText.getValue()+e.key)}}}),Object.defineProperties(F,{...v().getStaticProperties("StringSensor","KeyDeviceSensor",2,"children","3.0"),fieldDefinitions:{value:new(K())([new(u())(D().inputOutput,"metadata",new(b().SFNode)),new(u())(D().inputOutput,"description",new(b().SFString)),new(u())(D().inputOutput,"enabled",new(b().SFBool)(!0)),new(u())(D().inputOutput,"deletionAllowed",new(b().SFBool)(!0)),new(u())(D().outputOnly,"enteredText",new(b().SFString)),new(u())(D().outputOnly,"finalText",new(b().SFString)),new(u())(D().outputOnly,"isActive",new(b().SFBool))]),enumerable:!0}});const A=F,x=n().add("StringSensor",A);a().add({name:"KeyDeviceSensor",concreteNodes:[T,x],abstractNodes:[C],browserContext:d});n().add("KeyDeviceSensorComponent",undefined)})();